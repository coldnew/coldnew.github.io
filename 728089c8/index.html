<!doctype html>
<html class="theme-next use-motion theme-next-mist">
  <head>
  

<script type="text/javascript" src="/vendors/jquery/dist/jquery.min.js"></script>
<link rel="stylesheet" href="/vendors/bootstrap/dist/css/bootstrap.min.css" type="text/css">
<script type="text/javascript" src="/vendors/bootstrap/dist/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/js/responsive.js"></script>

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />


  <meta name="google-site-verification" content="2KupV-VpD04LYh25td4WXU0FNSfAQUQjYs13zPnAXls" />



  <meta name="msvalidate.01" content="A2F329127555BDD555949FFD886CFF2B" />



  <meta name="baidu-site-verification" content="fwxmwVqWtK,5z58vsAQKG" />





  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>




  <meta name="keywords" content="c/c++,wayland,meson,weston,sourcetrail," />



  <link rel="alternate" href="/rss.xml" title="coldnew&#39;s blog" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="最近在啃 weston 的程式碼，突然想到可以透過 Sourcetrail 來協助閱讀程式碼，因此來試試看。">
<meta property="og:type" content="article">
<meta property="og:title" content="使用sourcetrail 來閱讀meson專案的程式碼">
<meta property="og:url" content="https://coldnew.github.io/728089c8/index.html">
<meta property="og:site_name" content="coldnew&#39;s blog">
<meta property="og:description" content="最近在啃 weston 的程式碼，突然想到可以透過 Sourcetrail 來協助閱讀程式碼，因此來試試看。">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://coldnew.github.io/728089c8/1.png">
<meta property="og:image" content="https://coldnew.github.io/728089c8/2.png">
<meta property="og:image" content="https://coldnew.github.io/728089c8/3.png">
<meta property="og:image" content="https://coldnew.github.io/728089c8/4.png">
<meta property="og:image" content="https://coldnew.github.io/728089c8/5.png">
<meta property="og:image" content="https://coldnew.github.io/728089c8/6.png">
<meta property="og:image" content="https://coldnew.github.io/728089c8/7.png">
<meta property="article:published_time" content="2019-12-08T15:20:00.000Z">
<meta property="article:modified_time" content="2020-02-12T15:33:00.000Z">
<meta property="article:author" content="Yen-Chin, Lee">
<meta property="article:tag" content="c&#x2F;c++">
<meta property="article:tag" content="wayland">
<meta property="article:tag" content="meson">
<meta property="article:tag" content="weston">
<meta property="article:tag" content="sourcetrail">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://coldnew.github.io/728089c8/1.png">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post'
  };
</script>

  <title> 使用sourcetrail 來閱讀meson專案的程式碼 | coldnew&#39;s blog </title>
<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="https://schema.org/WebPage" lang="zh-tw,en,default">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="https://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode" target="_blank" rel="noopener">
      <img src="https://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->

  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42122243-1', 'auto');
  ga('send', 'pageview');
</script>




  <div class="container-fluid one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="https://schema.org/WPHeader">
      <div class="header-inner"><link rel="canonical" href="https://coldnew.github.io/728089c8/" />
<h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">coldnew&#39;s blog</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            首頁
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-next-categories"></i> <br />
            分類
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            歸檔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            標籤
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal " itemscope itemtype="https://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              使用sourcetrail 來閱讀meson專案的程式碼
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          最後更新
          <time itemprop="dateCreated" datetime="2020-02-12T23:33:00+08:00" content="2020-02-12">
            2020-02-12
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><div id="content">
<p>
最近在啃 <a href="https://github.com/wayland-project/weston" target="_blank" rel="noopener">weston</a> 的程式碼，突然想到可以透過 <a href="https://github.com/CoatiSoftware/Sourcetrail" target="_blank" rel="noopener">Sourcetrail</a> 來協助閱讀程式碼，因此來試試看。
</p>

<a id="more"></a>

<p>
本文將講述如何透過 <a href="https://github.com/CoatiSoftware/Sourcetrail" target="_blank" rel="noopener">Sourcetrail</a> 來協助閱讀以 <a href="https://mesonbuild.com" target="_blank" rel="noopener">meson</a> 編譯系統為主的專案。其中 <a href="https://github.com/CoatiSoftware/Sourcetrail" target="_blank" rel="noopener">Sourcetrail</a> 的安裝方式請自行查找，不額外贅述。
</p>

<div id="outline-container-orgf3e9679" class="outline-2">
<h2 id="orgf3e9679">取得 weston</h2>
<div class="outline-text-2" id="text-orgf3e9679">
<p>
本文以 <a href="https://github.com/wayland-project/weston" target="_blank" rel="noopener">weston</a> 為例，因此我們先來下載 <a href="https://github.com/wayland-project/weston" target="_blank" rel="noopener">weston</a> 的程式碼
</p>

<pre class="example">
git clone https://github.com/wayland-project/weston.git
</pre>


<p>
接下來進入到 <code>weston</code> 資料夾去
</p>

<pre class="example">
coldnew@gentoo ~ $ cd weston
</pre>

<p>
本文撰寫時以 <code>7.0.0</code> 這個 tag 為主，因此請切過去，或使用當前的 branch
</p>

<pre class="example">
coldnew@gentoo ~/weston $ git checkout v7.0.0
Note: switching to '7.0.0'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by switching back to a branch.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -c with the switch command. Example:

  git switch -c &lt;new-branch-name&gt;

Or undo this operation with:

  git switch -

Turn off this advice by setting config variable advice.detachedHead to false

HEAD is now at 3180fa8a build: bump to version 7.0.0 for the official release
</pre>
</div>
</div>

<div id="outline-container-org5cf8990" class="outline-2">
<h2 id="org5cf8990">安裝編譯用的依賴</h2>
<div class="outline-text-2" id="text-org5cf8990">
<p>
由於我們要查看 weston 的程式碼，因此最好讓系統滿足編譯 weston 的依賴，這樣在查找的時候才不會有什麼東西找不到對應的標頭檔或是對應的程式碼檔案。
</p>

<p>
由於筆者是 Gentoo Linux 的使用者，安裝依賴只要用以下命令就可以完成囉～
</p>

<pre class="example">
coldnew@gentoo ~ $ sudo emerge dev-libs/weston
</pre>

<p>
其他 Linux 發行板的使用者則請參照該發行板的作法，或是參考 <a href="https://wayland.freedesktop.org/building.html" target="_blank" rel="noopener">Building weston</a> 一文來滿足系統依賴。
</p>
</div>
</div>
<div id="outline-container-org77a0b2c" class="outline-2">
<h2 id="org77a0b2c">編譯 weston</h2>
<div class="outline-text-2" id="text-org77a0b2c">
<p>
安裝好編譯依賴後，由於我們需要透過 <a href="https://github.com/CoatiSoftware/Sourcetrail" target="_blank" rel="noopener">Sourcetrail</a> 來查看 weston 的程式碼，因此需要透過以下命令去讓 <a href="https://mesonbuild.com" target="_blank" rel="noopener">meson</a> 產生一些編譯前資訊
</p>

<pre><font color="lightgreen" style="-moz-user-select: none; -webkit-user-select: none; -ms-user-select:none; user-select:none;-o-user-select:none;"
onmousedown="return false;" onselectstart="return false;" ondragstart="return false"><b>coldnew@getnoo</b></font><font color="lightblue" style="-moz-user-select: none; -webkit-user-select: none; -ms-user-select:none; user-select:none;-o-user-select:none;"
onmousedown="return false;" onselectstart="return false;" ondragstart="return false"><b> ~/weston $</b></font> meson build -Dsimple-dmabuf-drm=auto
<b>The Meson build system</b>
Version: 0.52.1
Source dir: <b>/home/coldnew/weston</b>
Build dir: <b>/home/coldnew/weston/build</b>
Build type: <b>native build</b>
Project name: <b>weston</b>
Project version: <b>7.0.0</b>
C compiler for the host machine: <b>cc</b> (gcc 9.2.0 &quot;cc (Gentoo 9.2.0-r3 p4) 9.2.0&quot;)
C linker for the host machine: <b>GNU ld.bfd</b> 2.32
Host machine cpu family: <b>x86_64</b>
Host machine cpu: <b>x86_64</b>
Found git repository at /data/Workspace/wayland/weston
Compiler for C supports arguments -Wno-unused-parameter -Wunused-parameter: <font color="#4E9A06"><b>YES</b></font>
Compiler for C supports arguments -Wno-shift-negative-value -Wshift-negative-value: <font color="#4E9A06"><b>YES</b></font>
Compiler for C supports arguments -Wno-missing-field-initializers -Wmissing-field-initializers: <font color="#4E9A06"><b>YES</b></font>
Compiler for C supports arguments -Wno-pedantic -Wpedantic: <font color="#4E9A06"><b>YES</b></font>
Compiler for C supports arguments -fvisibility=hidden: <font color="#4E9A06"><b>YES</b></font>
.... skip ....
Configuring <b>weston-rdp.7</b> using configuration
Configuring <b>config.h</b> using configuration
<b>Message:</b> Documentation will not be built. Use -Ddoc to build it.
Build targets in project: <b>170</b>
Found ninja-1.9.0.git.kitware.dyndep-1.jobserver-1 at /usr/bin/ninja
</pre>

<p>
另外，由於 <code>weston</code> 會在編譯的時候透過 <code>wayland-scanner</code> 來產生一些需要的 <code>header</code> 以及 <code>.c</code> 檔案，因此我們還是透過 <a href="https://ninja-build.org/manual.html" target="_blank" rel="noopener">ninja</a> 這套編譯系統來將我們的程式碼編譯一下吧~
</p>

<pre><font color="lightgreen" style="-moz-user-select: none; -webkit-user-select: none; -ms-user-select:none; user-select:none;-o-user-select:none;"
onmousedown="return false;" onselectstart="return false;" ondragstart="return false"><b>coldnew@getnoo</b></font><font color="lightblue" style="-moz-user-select: none; -webkit-user-select: none; -ms-user-select:none; user-select:none;-o-user-select:none;"
onmousedown="return false;" onselectstart="return false;" ondragstart="return false"><b> ~/weston $</b></font> ninja -C build
ninja: Entering directory `build/&apos;
[121/433] Compiling C object &apos;libweston/backend-rdp/13a5658@@rdp-backend@sha/rdp.c.o&apos;.
<b>../libweston/backend-rdp/rdp.c:</b> In function ‘<b>rdp_peer_context_new</b>’:
<b>../libweston/backend-rdp/rdp.c:748:2:</b> <font color="#75507B"><b>warning: </b></font>‘<b>nsc_context_set_pixel_format</b>’ is deprecated [<font color="#75507B"><b>-Wdeprecated-declarations</b></font>]
  748 |  <font color="#75507B"><b>nsc_context_set_pixel_format</b></font>(context-&gt;nsc_context, DEFAULT_PIXEL_FORMAT);
      |  <font color="#75507B"><b>^~~~~~~~~~~~~~~~~~~~~~~~~~~~</b></font>
In file included from <b>/usr/include/winpr2/winpr/wtsapi.h:25</b>,
                 from <b>/usr/include/freerdp2/freerdp/types.h:25</b>,
                 from <b>/usr/include/freerdp2/freerdp/freerdp.h:43</b>,
                 from <b>../libweston/backend-rdp/rdp.c:85</b>:
<b>/usr/include/freerdp2/freerdp/codec/nsc.h:47:36:</b> <font color="#06989A"><b>note: </b></font>declared here
   47 |  FREERDP_API WINPR_DEPRECATED(BOOL <font color="#06989A"><b>nsc_context_set_pixel_format</b></font>(NSC_CONTEXT* context,
      |                                    <font color="#06989A"><b>^~~~~~~~~~~~~~~~~~~~~~~~~~~~</b></font>
<b>/usr/include/winpr2/winpr/winpr.h:53:31:</b> <font color="#06989A"><b>note: </b></font>in definition of macro ‘<b>WINPR_DEPRECATED</b>’
   53 | #define WINPR_DEPRECATED(obj) <font color="#06989A"><b>obj</b></font> __attribute__((deprecated))
      |                               <font color="#06989A"><b>^~~</b></font>
[433/433] Linking target desktop-shell/desktop-shell.so.</pre>

<p>
完成後，你應該會看到 <code>build/compile_commands.json</code> 這個檔案，這就是我們要讓 <a href="https://github.com/CoatiSoftware/Sourcetrail" target="_blank" rel="noopener">Sourcetrail</a> 載入的 <a href="https://clang.llvm.org/docs/JSONCompilationDatabase.html" target="_blank" rel="noopener">JSON Compilation Database</a>
</p>
</div>
</div>

<div id="outline-container-org3c5a011" class="outline-2">
<h2 id="org3c5a011">Sourcetrail 建立專案</h2>
<div class="outline-text-2" id="text-org3c5a011">
<p>
啟動 <a href="https://github.com/CoatiSoftware/Sourcetrail" target="_blank" rel="noopener">Sourcetrail</a> 後，我們來建立新的專案
</p>


<div class="figure">
<p><img src="1.png"  />
</p>
</div>

<p>
好了後，填一下專案名稱與路徑，然後進行下一步
</p>


<div class="figure">
<p><img src="2.png"  />
</p>
</div>

<p>
由於我們要載入的是  <a href="https://clang.llvm.org/docs/JSONCompilationDatabase.html" target="_blank" rel="noopener">compile_commands.json</a> 這個檔案，因此選擇 <code>C/C++ from Compilation Database</code>
</p>


<div class="figure">
<p><img src="3.png"  />
</p>
</div>

<p>
選擇我們要載入的 <code>build/compile_commands.json</code> 檔案，由於 <code>config.h</code> 以及 <code>protocols資料夾</code> 是編譯時期產生的檔案，因此要告知 <a href="https://github.com/CoatiSoftware/Sourcetrail" target="_blank" rel="noopener">Sourcetrail</a> 載入這些傢伙。
</p>


<div class="figure">
<p><img src="4.png"  />
</p>
</div>

<p>
都好了後，建立我們的專案
</p>


<div class="figure">
<p><img src="5.png"  />
</p>
</div>

<p>
並讓 <a href="https://github.com/CoatiSoftware/Sourcetrail" target="_blank" rel="noopener">Sourcetrail</a> 進行索引
</p>


<div class="figure">
<p><img src="6.png"  />
</p>
</div>
</div>
</div>

<div id="outline-container-org33a3bd7" class="outline-2">
<h2 id="org33a3bd7">Sourcetrail 查看程式碼</h2>
<div class="outline-text-2" id="text-org33a3bd7">
<p>
索引完成後，就可以透過 <a href="https://github.com/CoatiSoftware/Sourcetrail" target="_blank" rel="noopener">Sourcetrail</a> 來查找我們的程式碼囉~
</p>


<div class="figure">
<p><img src="7.png"  />
</p>
</div>
</div>
</div>

<div id="outline-container-orgf18ab20" class="outline-2">
<h2 id="orgf18ab20">延伸閱讀</h2>
<div class="outline-text-2" id="text-orgf18ab20">
<ul class="org-ul">
<li><a href="https://sarcasm.github.io/notes/dev/compilation-database.html" target="_blank" rel="noopener">Sarcasm notebook: Compilation database</a></li>

<li><a href="https://www.sourcetrail.com/documentation/" target="_blank" rel="noopener">Sourcetrail documentation</a></li>
</ul>
</div>
</div>
</div>
</span>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/c-c/" rel="tag">#c/c++</a>
          
            <a href="/tags/wayland/" rel="tag">#wayland</a>
          
            <a href="/tags/meson/" rel="tag">#meson</a>
          
            <a href="/tags/weston/" rel="tag">#weston</a>
          
            <a href="/tags/sourcetrail/" rel="tag">#sourcetrail</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/16cb6a8e/" rel="prev">在 Gentoo Linux 安裝 Vivado 2020.1</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/3dbd10f2/" rel="next">bootlin 的課程資源</a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

 </div>

        
          <div class="comments" id="comments">
            
               <div id="gitalk-container"></div>
            
          </div>
        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目錄
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            本站概覽
          </li>
        </ul>
      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="https://schema.org/Person">
          <img class="site-author-image" src="https://www.gravatar.com/avatar/bda0c97c8dca6eb45824d1b83f477ad9" alt="Yen-Chin, Lee" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Yen-Chin, Lee</p>
        </div>
        <p class="site-description motion-element" itemprop="description"></p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">135</span>
              <span class="site-state-item-name">文章</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">16</span>
              <span class="site-state-item-name">分類</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">104</span>
              <span class="site-state-item-name">標籤</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/rss.xml" rel="alternate">
              <i class="menu-item-icon icon-next-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/coldnew" target="_blank">github</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://plus.google.com/u/0/106837301382084981260/posts" target="_blank">google+</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.linkedin.com/in/coldnew/" target="_blank">linkedln</a>
              </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="https://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#orgf3e9679"><span class="nav-text">取得 weston</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#org5cf8990"><span class="nav-text">安裝編譯用的依賴</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#org77a0b2c"><span class="nav-text">編譯 weston</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#org3c5a011"><span class="nav-text">Sourcetrail 建立專案</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#org33a3bd7"><span class="nav-text">Sourcetrail 查看程式碼</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#orgf18ab20"><span class="nav-text">延伸閱讀</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </section>
      

    </div>
  </aside>


    </main>

    <footer id="footer" class="container">
      <div class="footer">
        <div class="footer-inner"> 
<div class="copyright" >
  
  Copyright  &copy; &nbsp;  2012 - 
  <span itemprop="copyrightYear">2020</span>
  <span class="author" itemprop="copyrightHolder">Yen-Chin, Lee</span>
   &middot;  Powered by  <a href="https://github.com/coldnew/hexo-renderer-org" target="_blank">coldnew/hexo-renderer-org</a>
</div>

<!--
<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 強力驅動
</div>

<div class="theme-info">
  主題 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">
    NexT.Mist
  </a>
</div>
-->


 </div>
      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <!-- <script type="text/javascript" src="/vendors/jquery/dist/jquery.min.js"></script> -->
  <!-- <link rel="stylesheet" href="/vendors/bootstrap/dist/css/bootstrap.min.css" type="text/css"> -->
  <!-- <script type="text/javascript" src="/vendors/bootstrap/dist/js/bootstrap.min.js"></script> -->

  
  
  
    
  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.1" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 0.4 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    var $tocContent = $('.post-toc-content');
    if (isDesktop() && CONFIG.sidebar === 'post') {
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
        displaySidebar();
      }
    }
  });
</script>



  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  


  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
  <script type="text/javascript" src="/js/app.js"></script>

<!-- LOCAL: You can save these files to your site and update links -->
  
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<!-- END LOCAL -->
    
      <script type="text/javascript">
      function renderGitalk(){
        var gitalk = new Gitalk({
            owner: 'coldnew',
            repo: 'coldnew.github.io',
            clientID: 'b68fc8fd50fcc051b95e',
            clientSecret: '7f005263788db4a303b57e8296bb6800de1f9acf',
            admin: 'coldnew',
            
              distractionFreeMode: 'true'
            
            });
        gitalk.render('gitalk-container');
      }
      renderGitalk();
      </script>
    

</body>
</html>
